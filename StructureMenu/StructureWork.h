#ifndef STRUCTUREWORK
#define STRUCTUREWORK

#include "MenuWork.h"
#include <iomanip>
#include <fstream>
#include <sstream>

// структура методов оценивания
struct AddElm {
	std::string session;
	AddElm* ptr; // указатель на следующий метод оценивания
};

// структура дисциплин
struct MainElm {
	std::string subject;
	MainElm* ptr1; // указатель на учебную дисциплину
	AddElm* ptr2;  // указатель на метод оценивания
};

// глобальные переменные

extern MainElm* mainPtr;                           // начальный указатель на всю структуру
const extern std::vector<std::string> sessionKind; // вектор методов оценивания
const extern std::string exitStr;                  // символ выхода из меню ввода

// функции для прямой работы со структурой

void deleteStructure();                           // полное удаление структуры
MainElm* subjectFound(std::string name);          // получения указателя на дисциплину по ее названию
void printStructure();                            // вывод структуры в консоль
MainElm* appendMainElm(std::string appSubject);   // добавление дисциплины в структуру
void removeMainElm(std::string remSubject);       // удаление дисциплины из структуры
bool greater(const MainElm* a, const MainElm* b); // функция сравнения для названий дисциплин, соотвествует знаку > 
bool lesser(const MainElm* a, const MainElm* b);  // функция сравнения для названий дисциплин, соотвествует знаку <
void sortStructure(bool compare(const MainElm*, const MainElm*));   // сортировка структуры
AddElm* sessionFound(MainElm* subject, std::string session);        // получения указателя на метод по его названию
void appendAddElm(std::string appSession, MainElm* subjectPtr);     // добавление метода оценивания в структуру
void removeAddElm(std::string remSession, MainElm* subjectPtr);     // удаление метода оценивания из структуры

// функии для работы с пользователем, меню

void menu();                            // основное меню программы
bool continueWriting();                 // меню записи или дозаписи структуры
bool insertAddElm(MainElm* subjectPtr); // запись нескольких методов оценивания для предмета
bool createFile();                      // сохранение структуры в файл
void loadFile(std::string filename);    // загрузка структуры из файла
bool editStructure();                   // меню редактирования структуры
bool menuSorting();                     // меню сортировки структуры по дисциплинам
void specialOutput();                   // вывод дисциплин, которые содержат определенные методы оценивания

// меню редактирования структуры

bool edit_appendSession(); // добавление метода оценивания
bool edit_removeSubject(); // удаление дисциплины
bool edit_removeSession(); // удаление метода оценивания

// дополнительный функции

bool receiveISS(const std::string& filename); // фильтр для выбора файлов формата .iss
void isAdequate(const std::string str);       // проверка на адекватность введенного названия дисциплины

#endif // STRUCTUREWORK